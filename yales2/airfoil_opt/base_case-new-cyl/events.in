STATE st1 DESCRIPTION = "Initialize flow field"
STATE st1 TYPE = LOGICAL
STATE st1 VALUE_IF_NEW = TRUE

STATE st2 DESCRIPTION = "Initialization done"
STATE st2 TYPE = LOGICAL
STATE st2 VALUE_IF_NEW = FALSE

STATE st3 DESCRIPTION = "Beyond 50 iterations"
STATE st3 TYPE = LOGICAL
STATE st3 VALUE_IF_NEW = FALSE

EVENT evt1 TYPE = AT_NITER
EVENT evt1 VALUE = 5
EVENT evt1 STEP = AFTER_INCREMENT_SOLVER
EVENT evt1 ACTION = myact1
ACTION myact1 TYPE = SET_DATA_VALUE
ACTION myact1 DATA = DT_MAX
ACTION myact1 VALUE = 1.E15

EVENT evt2 TYPE = STATE_TOTAL_NITER
EVENT evt2 VALUE = 10
EVENT evt2 STATE = st1
EVENT evt2 ACTION = myact2
ACTION myact2 TYPE = SWITCH_STATES
ACTION myact2 FROM_STATE = st1
ACTION myact2 TO_STATE = st2

EVENT evt3 TYPE = AT_NITER
EVENT evt3 VALUE = 50
EVENT evt3 STEP = AFTER_INCREMENT_SOLVER
EVENT evt3 ACTION = myact3
EVENT evt3 ACTION = myact4
ACTION myact3 TYPE = SET_STATE
ACTION myact3 STATE = st3
ACTION myact3 VALUE = TRUE
ACTION myact4 TYPE = SET_DATA_VALUE
ACTION myact4 DATA = DT_MAX
ACTION myact4 VALUE = 2.E15

EVENT evt4 TYPE = AT_NITER
EVENT evt4 VALUE = 60
EVENT evt4 STEP = AFTER_INCREMENT_SOLVER
EVENT evt4 ACTION = myact5
ACTION myact5 TYPE = RESET_ALL_STATS

EVENT evt5 TYPE = SCALAR_MAX_VALUE
EVENT evt5 VALUE = 50
EVENT evt5 SOURCE = NUSSELT
EVENT evt5 ACTION = myact6
ACTION myact6 TYPE = COPY_DATA
ACTION myact6 SOURCE = Z
ACTION myact6 DESTINATION = Z_COPY



